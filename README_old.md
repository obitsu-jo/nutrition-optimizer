# Nutrition Optimizer （栄養最適化プロジェクト）

## 1. 概要

このプロジェクトは、日々の食生活における「栄養バランス」と「経済性」を両立させるための最適な食品の組み合わせを、**線形計画法（Linear Programming）** を用いて算出するツールです。

入手可能な食品リスト、その栄養成分、価格を基に、設定された栄養摂取基準を満たしながら、総食費が最小となるような献立を提案します。

## 2. プロジェクトの目的

*   **健康的な食生活のサポート**: 厚生労働省の「日本人の食事摂取基準」などを基に、必要な栄養素を過不足なく摂取できる食事プランを計算します。
*   **経済的負担の軽減**: 栄養バランスを維持しつつ、食費を最小限に抑える組み合わせを発見します。
*   **現実的な献立の提案**: 「ご飯は1食2合まで」といった、食品ごとの摂取上限量を設定することで、非現実的な結果（例: 栄養は満点だが、ひたすら同じサプリメントを摂取する）を避け、実行可能な食事内容を導き出します。
*   **学習と実践**: 線形計画法という数理最適化技術を、食事という身近なテーマで実践的に学びます。

## 3. 技術スタック・使用ツール

*   **言語**: Python 3.11
*   **主要ライブラリ**:
    *   **PuLP**: 線形計画問題をPythonで直感的に記述し、解くためのライブラリ。
    *   **Pandas**: 食品成分表や価格データなど、表形式データの読み込み、加工、管理に使用します。
    *   **openpyxl**: PandasがExcelファイル（`.xlsx`）を読み書きするために内部で使用します。
*   **開発環境**:
    *   **Docker / Docker Compose**: 依存関係を含めた開発環境をコンテナ化し、再現性を担保します。
    *   **Visual Studio Code + Dev Containers**: コンテナ内でシームレスな開発体験を実現します。

## 4. 開発環境のセットアップ

このプロジェクトはDev Containerを利用して、環境構築を自動化しています。

**前提条件**:
*   Visual Studio Code がインストールされていること。
*   VS Codeに [Dev Containers](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers) 拡張機能がインストールされていること。

**手順**:
1.  このプロジェクトリポジトリをローカルにクローンします。
2.  VS Codeで、クローンしたプロジェクトのフォルダを開きます。
3.  画面右下に「Reopen in Container」という通知が表示されたら、そのボタンをクリックします。（表示されない場合は、`F1`キーでコマンドパレットを開き、`Dev Containers: Reopen in Container` を実行します）
4.  初回はDockerイメージのビルドに数分かかります。ビルドが完了すると、コンテナ内で開発を開始できる状態になります。

## 5. 必要なデータ

計算を実行するには、以下の3種類のデータが必要です。これらは `data` ディレクトリに配置することを想定しています。

1.  **食品成分データ (Food Composition Data)**
    *   **内容**: 各食品の単位あたり（例: 100gあたり）の栄養成分リスト。
    *   **取得元**: [文部科学省「日本食品標準成分表（八訂）増補2023年」](https://www.mext.go.jp/a_menu/syokuhinseibun/mext_00001.html) のExcelファイルをダウンロードして利用します。
    *   **配置場所**: `data/raw/food_composition.xlsx`

2.  **食品価格データ (Price Data)**
    *   **内容**: 上記の食品リストに対応する、単位あたりの価格リスト。**このデータはご自身で作成する必要があります。**
    *   **作成方法**: 近所のスーパーマーケットの価格などを参考に、`食品名, 1gあたりの価格` などの形式でCSVファイルを作成します。
    *   **配置場所**: `data/input/prices.csv`

3.  **制約条件データ (Constraints Data)**
    *   **内容**: 最適化の目標となる制約条件のリスト。
        *   **栄養素の摂取基準**: 各栄養素の1日あたりの最小値（推奨量）と最大値。
        *   **食品の摂取上限**: 特定の食品に対する摂取量の上限（例: 米は300gまで）。
    *   **作成方法**: 「日本人の食事摂取基準」やご自身の目標に基づき、JSONやCSV形式で作成します。
    *   **配置場所**: `data/input/constraints.json`

## 6. ディレクトリ構造案

プロジェクトを整理しやすくするための推奨ディレクトリ構造です。

```plaintext
nutrition-optimizer/
│
├── .devcontainer/         # Dev Container設定ファイル
│   ├── devcontainer.json
│   ├── Dockerfile
│   └── docker-compose.yml
│
├── data/                    # データファイルを格納
│   ├── input/               # モデルへの入力データ（価格、制約など）
│   │   ├── prices.csv
│   │   └── constraints.json
│   ├── output/              # 計算結果の出力先
│   └── raw/                 # 加工前の生データ
│       └── food_composition.xlsx
│
├── src/                     # Pythonソースコード
│   ├── main.py              # メインの実行スクリプト
│   ├── optimizer.py         # 線形計画モデルの構築と求解を行うモジュール
│   ├── data_loader.py       # 各種データの読み込みと前処理を行うモジュール
│   └── config.py            # 設定ファイル
│
└── README.md                # このドキュメント
```

## 7. 次のステップ (TODO)

-   [ ] **データ収集・整形**:
    -   [ ] 食品成分表をダウンロードし、`data/raw`に配置する。
    -   [ ] 対象とする食品を選定し、`data/input/prices.csv` を作成する。
    -   [ ] 自身の栄養摂取基準を定め、`data/input/constraints.json` を作成する。
-   [ ] **データローダーの実装 (`src/data_loader.py`)**:
    -   [ ] 各データファイルをPandas DataFrameとして読み込む機能を実装する。
-   [ ] **最適化モデルの実装 (`src/optimizer.py`)**:
    -   [ ] PuLPを使い、決定変数、目的関数、制約条件を定義する関数を実装する。
-   [ ] **メイン処理の実装 (`src/main.py`)**:
    -   [ ] データ読み込み、最適化実行、結果表示の一連の流れを実装する。